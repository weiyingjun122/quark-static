<!DOCTYPE html>
<html>
<head>
    <title>æ‰‹æœºç»Ÿè®¡æµ‹è¯•</title>
</head>
<body>
    <h1>æ‰‹æœºç»Ÿè®¡æµ‹è¯•</h1>
    <button onclick="testRecord()">æµ‹è¯•è®°å½•æœç´¢</button>
    <button onclick="testHot()">æµ‹è¯•è·å–çƒ­æœ</button>
    <button onclick="testDebug()">æµ‹è¯•è°ƒè¯•æ¥å£</button>

    <div id="result"></div>

    <script>
        const WORKER_URL = 'https://quark-search-api.weiyingjun122.workers.dev';

        function log(msg) {
            document.getElementById('result').innerHTML += `<div>${msg}</div>`;
            console.log(msg);
        }

        function testRecord() {
            const keyword = 'æ‰‹æœºæµ‹è¯•_' + Date.now();
            log(`ğŸ“± æµ‹è¯•æ‰‹æœºæœç´¢: ${keyword}`);

            fetch(`${WORKER_URL}/record?q=${encodeURIComponent(keyword)}`)
                .then(r => r.json())
                .then(data => log(`âœ… æˆåŠŸ: ${JSON.stringify(data)}`))
                .catch(e => log(`âŒ å¤±è´¥: ${e}`));
        }

        function testHot() {
            log('ğŸ”¥ è·å–çƒ­æœ...');
            fetch(`${WORKER_URL}/hot`)
                .then(r => r.json())
                .then(data => log(`âœ… çƒ­æœ: ${JSON.stringify(data).slice(0, 200)}...`))
                .catch(e => log(`âŒ å¤±è´¥: ${e}`));
        }

        function testDebug() {
            log('ğŸ› è°ƒè¯•æ¥å£...');
            fetch(`${WORKER_URL}/debug`)
                .then(r => r.json())
                .then(data => {
                    log(`âœ… æ€»å…³é”®è¯: ${data.statsSummary?.totalKeywords}`);
                    log(`âœ… æ€»æœç´¢æ¬¡æ•°: ${data.statsSummary?.totalSearches}`);
                    log(`âœ… è¾¾åˆ°é˜ˆå€¼: ${data.statsSummary?.keywordsAboveThreshold}`);
                })
                .catch(e => log(`âŒ å¤±è´¥: ${e}`));
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            log(`è®¾å¤‡: ${navigator.userAgent}`);
            log(`æ˜¯å¦ä¸ºæ‰‹æœº: ${/Mobi|Android|iPhone/i.test(navigator.userAgent) ? 'æ˜¯' : 'å¦'}`);
            log(`Worker URL: ${WORKER_URL}`);
        };
    </script>
</body>
</html>
